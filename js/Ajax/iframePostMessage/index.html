<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>通过postMessage和监听message事件实现iframe间通信</title>
</head>
<body>
	<div style="width: 200px; float: left; margin-right: 200px; border: solid 1px #333;">
		<div id="color">Frame Color</div>
	</div>
	<div>
		<iframe id="child" src="childIframe.html" frameborder="0"></iframe>

	<script type="text/javascript">

		//index.html加载完成执行，获取子iframe背景颜色
		window.onload = function(){
			window.frames[0].postMessage("getColor", "*");
		};

		//接收到来自iframe的color
		window.addEventListener("message", function(e){
			var color = e.data;   //子iframe中的值
			document.getElementById("color").style.backgroundColor = color;
		}, false);
	</script>	
</div>
</body>
</html>